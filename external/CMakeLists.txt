cmake_minimum_required(VERSION 3.25)

if (${USE_MIMALLOC})
	set(MI_SECURE TRUE CACHE BOOL "" FORCE)
	set(MI_DEBUG_FULL $<STREQUAL:$<CONFIG>,Debug> CACHE BOOL "" FORCE)
	set(MI_OVERRIDE FALSE CACHE BOOL "" FORCE)
	set(MI_BUILD_SHARED TRUE CACHE BOOL "" FORCE)
	set(MI_BUILD_STATIC FALSE CACHE BOOL "" FORCE)
	set(MI_BUILD_OBJECT FALSE CACHE BOOL "" FORCE)
	set(MI_BUILD_TESTS FALSE CACHE BOOL "" FORCE)
	add_subdirectory(mimalloc EXCLUDE_FROM_ALL)
	set_target_properties(mimalloc PROPERTIES FOLDER External)
endif()

set(NVRHI_INSTALL OFF CACHE BOOL "" FORCE)
set(NVRHI_BUILD_SHARED ON CACHE BOOL "" FORCE)
set(NVRHI_BUILD_STATIC OFF CACHE BOOL "" FORCE)
add_subdirectory(nvrhi EXCLUDE_FROM_ALL)
set_target_properties(nvrhi PROPERTIES FOLDER External)
